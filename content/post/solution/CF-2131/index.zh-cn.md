---
title: CF-2131 (Codeforces Round 1042, Div. 3) 题解
description: 我怎么 Div. 2 和 Div. 3 场上都过 3 道题啊
date: 2025-08-11T12:15:00+08:00
image: https://codeforces.org/s/15422/images/codeforces-sponsored-by-ton.png
categories:
- 题解
tags:
---

## 2131A. Lever

### 题意

有数组 $a, b$，长度为 $n$。现在循环进行操作，每次操作包含两步：

- 选择一个 $1 \leq i \leq n$ 且 $a_i > b_i$，然后 $a_i -= 1$；若没有这样的 $i$，则忽略这一步。
- 选择一个 $1 \leq i \leq n$ 且 $a_i < b_i$，然后 $a_i += 1$；若没有这样的 $i$，则忽略这一步。

若在某次操作中，步骤 $1$ 被忽略了，则终止循环。

请问循环将会执行多少次？题目保证在任意一步中，对于所有可供选择的 $i$，不论选择哪个 $i$ 都不影响最终答案。

### 题解

目力惊人的我们发现，步骤 $2$ 不会影响步骤 $1$。

**证明**：对于某次操作中没有被忽略的步骤 $2$，选择的下标为 $i$，由于 $a_i < b_i$，可得 $a'_i \leq b_i$。因此，操作后的 $i$ 不可能被步骤 $1$ 选择，即步骤 $2$ 不影响步骤 $1$。

对于每个 $i$，操作 $1$ 至多可以执行 $\max(a_i - b_i, 0)$ 次。

遍历每个 $i$，累加操作 $1$ 的次数，最后加上 $1$（被忽略的那一次）即为答案。

### 参考代码

[Submission #333289337](https://codeforces.com/contest/2131/submission/333289337)

## 2131B. Alternating Series

### 题意

定义长度为 $n$ 的数组 $a$ 是**好的**当且仅当：

1. 对于每个 $1 \leq i \le n$，$a_i \times a_{i + 1} \le 0$；
2. 所有长度为 $2$ 以上的子数组的元素之和都为正。

定义**好的**数组 $a$ 比另一个**好的**数组 $b$ **更好**当且仅当 $[|a_1|, |a_2|, \ldots, |a_n|]$ 比 $[|b_1|, |b_2|, \ldots, |b_n|]$ 的字典序更小。

输出一个长度为 $n$ 的**好的**数组，使其比所有长度为 $n$ 的**好的**数组**更好**。

### 题解

> 这题完全可以找规律做

注意到**好的**数组满足：
1. 符号交替出现；
2. 所有长度为 $2$ 以上的子数组的元素之和都为正。

**证明**：

考虑子数组 $[a_{i - 1}, a_i, a_{i + 1}]$，其中 $2 \leq i \leq n - 1$。根据符号交替性：

$$a_{i - 1} + a_i + a_{i + 1} \leq -1 + a_i - 1 = a_i - 2$$

而根据题目要求 $a_{i - 1} + a_i + a_{i + 1} \geq 1$ 可得：

$$a_i \geq 3$$

对于边界情况 $i = n$，同理易得 $a_i \geq 2$。

综上可得数组构造方法：

- 对于奇数下标，取 $a_i = -1$
- 对于偶数下标
    - 当 $2 \leq i \leq n - 1$ 时，有 $a_i \geq 3$，为了绝对值字典序最小，取 $3$。
    - 当 $i = n$ 时，有 $a_i \geq 2$，同理取 $2$。

**正确性证明**：
1. 符号交替性显然满足
2. 对于任意长度 $k \geq 2$ 的子数组 $s$：
    - 当 $k = 2$ 时：由一个 $2$ 或 $3$ 与一个 $-1$ 组成，$\sum s \geq 2 - 1 = 1$；
    - 当 $k = 3$ 时：
        - $[3, -1, (2 or 3)]$，$\sum s \geq 3 - 1 + 2 = 4$，
        - $[-1, 3, -1]$，$\sum s \geq -1 + 3 - 1 = 1$；
    - 当 $k \geq 4$ 时：可以看作多个子数组的和，为正。

### 参考代码

[Submission #333498392](https://codeforces.com/contest/2131/submission/333498392)

## 2131C. Make it Equal

### 题意

给定两个可重集合 $S$ 和 $T$，可以对 $S$ 中任意一个元素 $x$ 进行操作：将 $S$ 中的一个 $x$ 替换为 $x + k$ 或 $|x - k|$。

请问是否可以将 $S$ 变化为 $T$？

### 题解

容易证明：我们只能将元素 $x$ 替换为 $y$ 当且仅当 $x \equiv y (\bmod k)$ 或 $x \equiv -y (\bmod k)$。

实现：存储 $S_i \bmod k$ 与 $-S_i \bmod k$ 中较小的一个，比较两集合经过这样处理后的新集合是否相同即可。

### 参考代码

[Submission #333526673](https://codeforces.com/contest/2131/submission/333526673)
